"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4417],{2665:function(t,e,n){n.d(e,{DW:function(){return i},Sg:function(){return p},UY:function(){return f},l5:function(){return d}});var r=n(4165),a=n(5861),c=n(1881),o=n.n(c),s=n(7095),u=n(8725),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a,c){var i,p;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o().get("".concat(u.Z,"/product/").concat(t));case 2:i=n.sent,p=i.data,a({type:s.G2,payload:{product:p.product._id,name:p.product.name,seller:p.product.brand.name,price:p.product.price,cuttedPrice:p.product.cuttedPrice,image:p.product.images[0].url,stock:p.product.stock,quantity:e}}),localStorage.setItem("cartItems",JSON.stringify(c().cart.cartItems));case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},p=function(t){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:s.OZ,payload:t}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},f=function(){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e,n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:s.yT}),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},d=function(t){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:s.EE,payload:t}),localStorage.setItem("shippingInfo",JSON.stringify(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},1507:function(t,e,n){n.d(e,{Cs:function(){return y},PO:function(){return i},TG:function(){return p},b9:function(){return m},s$:function(){return f},wH:function(){return v},yv:function(){return d},zk:function(){return l}});var r=n(4165),a=n(5861),c=n(1881),o=n.n(c),s=n(531),u=n(8725),i=function(t){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:s.Zm}),{headers:{"Content-Type":"application/json"}},e.next=5,o().post("".concat(u.Z,"/order/new"),t,{withCredentials:!0});case 5:a=e.sent,c=a.data,n({type:s.Cd,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n({type:s.Hn,payload:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},p=function(){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({type:s.A4}),t.next=4,o().get("".concat(u.Z,"/orders/me"),{withCredentials:!0});case 4:n=t.sent,a=n.data,e({type:s.SJ,payload:a.orders}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e({type:s.ut,payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},f=function(t){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:s.YO}),e.next=4,o().get("".concat(u.Z,"/order/").concat(t),{withCredentials:!0});case 4:a=e.sent,c=a.data,n({type:s.um,payload:c.order}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n({type:s.Ab,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},d=function(t){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:s.dR}),e.next=4,o().get("".concat(u.Z,"/payment/status/").concat(t),{withCredentials:!0});case 4:a=e.sent,c=a.data,console.log(c),n({type:s.jl,payload:c.txn}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n({type:s.CY,payload:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},l=function(){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({type:s.Ux}),t.next=4,o().get("".concat(u.Z,"/admin/orders"),{withCredentials:!0});case 4:n=t.sent,a=n.data,e({type:s.g6,payload:a.orders}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e({type:s.xH,payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},y=function(t,e){return function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var c,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:s.Mi}),{headers:{"Content-Type":"application/json"}},n.next=5,o().put("".concat(u.Z,"/admin/order/").concat(t),e,{withCredentials:!0});case 5:c=n.sent,i=c.data,a({type:s.Bx,payload:i.success}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:s.vs,payload:n.t0.response.data.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(t){return n.apply(this,arguments)}}()},v=function(t){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:s.B6}),e.next=4,o().delete("".concat(u.Z,"/admin/order/").concat(t),{withCredentials:!0});case 4:a=e.sent,c=a.data,n({type:s.Sn,payload:c.success}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n({type:s.gq,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(t){t({type:s.pp})}}},4417:function(t,e,n){n.r(e);var r=n(7230),a=n(7313),c=n(6352),o=n(8467),s=n(2665),u=n(1507),i=n(4431),p=n(6417);e.default=function(){console.log("orderstatus");var t=(0,c.I0)(),e=(0,o.s0)(),n=(0,r.Ds)().enqueueSnackbar,f=(0,o.UO)(),d=(0,c.v9)((function(t){return t.cart})),l=d.shippingInfo,y=d.cartItems,v=(0,c.v9)((function(t){return t.paymentStatus})),m=v.loading,h=v.txn,Z=v.error,g=(0,c.v9)((function(t){return t.newOrder})),w=g.loading,x=g.order,k=g.error;console.log(m,h);var I=y.reduce((function(t,e){return t+e.price*e.quantity}),0),b={paymentInfo:{id:h,status:"success"},shippingInfo:l,orderItems:y,totalPrice:I};return(0,a.useEffect)((function(){!1===m&&(h?"captured"===h.status?(b.paymentInfo={id:h.id,status:h.status},t((0,u.PO)(b))):(n("Processing Payment Failed!",{variant:"error"}),e("/orders/failed")):e("/cart"))}),[m]),(0,a.useEffect)((function(){console.log(w,x,k),!1===w&&(x?(n("Order Placed",{variant:"success"}),t((0,s.UY)()),e("/orders/success")):e("/orders"))}),[w]),(0,a.useEffect)((function(){Z&&(n(Z,{variant:"error"}),t((0,u.b9)())),k&&(n(k,{variant:"error"}),t((0,u.b9)())),console.log(f.id,"hot day "),t((0,u.yv)(f.id))}),[t,Z,k,f.id,n]),(0,p.jsx)(i.Z,{})}},4431:function(t,e,n){var r=n(5281),a=n(6417);e.Z=function(){return(0,a.jsx)("div",{className:"min-h-screen min-w-full flex items-center justify-center",children:(0,a.jsx)(r.Z,{})})}}}]);