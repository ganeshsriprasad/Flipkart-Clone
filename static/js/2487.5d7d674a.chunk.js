"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2487],{2665:function(e,t,n){n.d(t,{DW:function(){return u},Sg:function(){return l},UY:function(){return p},l5:function(){return d}});var r=n(4165),a=n(5861),s=n(1881),c=n.n(s),i=n(7095),o=n(8725),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a,s){var u,l;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("".concat(o.Z,"/product/").concat(e));case 2:u=n.sent,l=u.data,a({type:i.G2,payload:{product:l.product._id,name:l.product.name,seller:l.product.brand.name,price:l.product.price,cuttedPrice:l.product.cuttedPrice,image:l.product.images[0].url,stock:l.product.stock,quantity:t}}),localStorage.setItem("cartItems",JSON.stringify(s().cart.cartItems));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},l=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:i.OZ,payload:e}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},p=function(){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:i.yT}),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:i.EE,payload:e}),localStorage.setItem("shippingInfo",JSON.stringify(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},1507:function(e,t,n){n.d(t,{Cs:function(){return f},PO:function(){return u},TG:function(){return l},b9:function(){return h},s$:function(){return p},wH:function(){return x},yv:function(){return d},zk:function(){return m}});var r=n(4165),a=n(5861),s=n(1881),c=n.n(s),i=n(531),o=n(8725),u=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.Zm}),{headers:{"Content-Type":"application/json"}},t.next=5,c().post("".concat(o.Z,"/order/new"),e,{withCredentials:!0});case 5:a=t.sent,s=a.data,n({type:i.Cd,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:i.Hn,payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},l=function(){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:i.A4}),e.next=4,c().get("".concat(o.Z,"/orders/me"),{withCredentials:!0});case 4:n=e.sent,a=n.data,t({type:i.SJ,payload:a.orders}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:i.ut,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.YO}),t.next=4,c().get("".concat(o.Z,"/order/").concat(e),{withCredentials:!0});case 4:a=t.sent,s=a.data,n({type:i.um,payload:s.order}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:i.Ab,payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.dR}),t.next=4,c().get("".concat(o.Z,"/payment/status/").concat(e),{withCredentials:!0});case 4:a=t.sent,s=a.data,console.log(s),n({type:i.jl,payload:s.txn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:i.CY,payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},m=function(){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:i.Ux}),e.next=4,c().get("".concat(o.Z,"/admin/orders"),{withCredentials:!0});case 4:n=e.sent,a=n.data,t({type:i.g6,payload:a.orders}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:i.xH,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e,t){return function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var s,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:i.Mi}),{headers:{"Content-Type":"application/json"}},n.next=5,c().put("".concat(o.Z,"/admin/order/").concat(e),t,{withCredentials:!0});case 5:s=n.sent,u=s.data,a({type:i.Bx,payload:u.success}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:i.vs,payload:n.t0.response.data.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},x=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.B6}),t.next=4,c().delete("".concat(o.Z,"/admin/order/").concat(e),{withCredentials:!0});case 4:a=t.sent,s=a.data,n({type:i.Sn,payload:s.success}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:i.gq,payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},h=function(){return function(e){e({type:i.pp})}}},2487:function(e,t,n){n.r(t);var r=n(4165),a=n(5861),s=n(9439),c=n(1881),i=n.n(c),o=n(7313),u=n(6352),l=n(5554),p=n(3405),d=n(1507),m=n(7230),f=n(1550),x=n(3929),h=n(4268),y=n(5685),v=n(4675),g=n(8467),A=(n(2665),n(1828)),w=n.n(A),j=n(8725),Z=n(6417);t.default=function(){var e=(0,u.I0)(),t=(0,g.s0)(),n=w()(),c=(0,m.Ds)().enqueueSnackbar,A=(0,u.v9)((function(e){return e.cart})),b=A.shippingInfo,k=A.cartItems,N=(0,u.v9)((function(e){return e.user})).user,S=(0,u.v9)((function(e){return e.newOrder})).error,I=k.reduce((function(e,t){return e+t.price*t.quantity}),0),z=(0,o.useState)(!1),C=(0,s.Z)(z,2),H=C[0],R=C[1],B={amount:Math.round(100*I),phoneNo:b.phoneNo,email:N.email},E=function(){var s=(0,a.Z)((0,r.Z)().mark((function s(o){var u,l,p,m;return(0,r.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o.preventDefault(),R(!0),s.prev=2,u=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.onload=t,r.onerror=n,document.head.appendChild(r)}))},s.next=6,i().post("".concat(j.Z,"/payment/process"),B);case 6:return l=s.sent,p=l.data,m={key:"rzp_test_u743lHilR2AxPn",amount:p.amount,currency:p.currency,name:"Flipkart",description:"Order Payment",email:"kumar@example.com",contact:"+917667798942",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAnFBMVEVHcEzy0UDInSPYqizbripqYVHWzHzy20Tq2F3u2VXzwTB3XBrz2D7ery315UnhsS0wcKL15k7y20oAbr4Hb7sHa7b64DH55DD82TEGheP45y8Kg9n63THxxi/4xzHuvC/+yjHlsyz80zLowysEetP/3h7vxBUHecyMp6L450G0qWhxlaQgi9hMkMB3pLTksBbWu1G0uomVnYXXyWSrIjT1AAAAFnRSTlMAcUl4/Q0a9T9Q7B20jsuoXL2GgoFsvBma+wAAAadJREFUOI11kw1zojAQhiN+BGxte+2dBoEQQggB+dL+//92uwmeIL1nnGHG53V32URCpmz9IPB35D/4r9XZUv0KftABPU+oVs/+bWJPwJnOOu2qiRup/Cd/euJ4eiSqhXTcu7wtlYOO8y9lAcAj/rQB+vS7U0GvpjM0Bux+ZvYYH+MuRLqCMYbreHVfW4XQxvqw0RDAKeJ/CmEFeBtpdQIJOJ+JBAqDuqm11nkuGfOJf1eOAouHQ44kiZQrErAZ32ETQfUxwBeB4hpGUWi08wkXK+LflaPDQI0DJBjgK7Kzml4793YRgM8BvUyER4hk0kK7yNLYTO0KiC0symomv030INxkdoQ9nhXoob4ZcwFatO3lUmdZyqHAAQ+DS5nkuc5hN9ooCNz6Pttk2diBkLXERJrCR7eqVKregE7TlIt3dyH2Ugjrcx0pFSn0NsDHG/XChRQ4dTJAgbLpXYBz734nPQHATLxWZVle+rHA+nGtPW4DwkBA3fqFhy57LCJaKKBqV8Ajcw5QRGAHha+QvW8Xf87tej9goIQlHF4W2mU+/vz++vBm9i+r/FSYRl4w2gAAAABJRU5ErkJggg==",order_id:p.id,handler:function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var s,o,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s={id:a.razorpay_payment_id,order_id:a.razorpay_order_id,signature:a.razorpay_signature},n.next=4,i().post("".concat(j.Z,"/callback"),s);case 4:o=n.sent,console.log(o.data),u={id:o.data.id,status:o.data.status},{paymentInfo:u,shippingInfo:b,orderItems:k,totalPrice:I},e((0,d.yv)(o.data.order_id)),t("/order/".concat(o.data.order_id)),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),c("Payment failed",{variant:"error"});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}(),prefill:{name:N.name,email:N.email,phone:b.phoneNo}},s.next=11,u("https://checkout.razorpay.com/v1/checkout.js");case 11:s.sent?new n(m).open():c("Failed to load Razorpay. Please try again later.",{variant:"error"}),s.next=18;break;case 15:s.prev=15,s.t0=s.catch(2),c("Payment failed",{variant:"error"});case 18:case"end":return s.stop()}}),s,null,[[2,15]])})));return function(e){return s.apply(this,arguments)}}();return(0,o.useEffect)((function(){S&&(e((0,d.b9)()),c(S,{variant:"error"}))}),[e,S,c]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(v.Z,{title:"Flipkart: Secure Payment | Razorpay"}),(0,Z.jsx)("main",{className:"w-full mt-20",children:(0,Z.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3.5 w-full sm:w-11/12 mt-0 sm:mt-4 m-auto sm:mb-7",children:[(0,Z.jsx)("div",{className:"flex-1",children:(0,Z.jsx)(p.Z,{activeStep:3,children:(0,Z.jsx)("div",{className:"w-full bg-white",children:(0,Z.jsxs)("form",{onSubmit:function(e){return E(e)},autoComplete:"off",className:"flex flex-col justify-start gap-2 w-full mx-8 my-4 overflow-hidden",children:[(0,Z.jsx)(f.Z,{children:(0,Z.jsx)(y.Z,{"aria-labelledby":"payment-radio-group",defaultValue:"paytm",name:"payment-radio-button",children:(0,Z.jsx)(x.Z,{value:"paytm",control:(0,Z.jsx)(h.Z,{}),label:(0,Z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Z.jsx)("img",{draggable:"false",className:"h-6 w-6 object-contain",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAWlBMVEVHcEwzlf8zlf8zlf8zlf8vhcozlf8zlv8zlf8zlf8zlf80mP80mP8zlf80l/8zlf8zlf8zlf8CDzUmdc07q/8GJVMHJlQHJlQFIE0GJVQHJlQHJlQEIk8HJlRFd1ufAAAAHnRSTlMAkjv/qwS+VxDTaCBHhC7kdfkmDBeI6P9Cpr1RZ9dOi+BjAAAA1ElEQVR4AX3RhQHDQAwDQKUKMzu4/5qtS6H/3AAGCbcc3HrQxQ3PJwPYBXwJYRNGfIlgE5PKgVkS8SOFUUalYJIXVNYTHG5KXFVURUSVm7JTGahoWVAkyKlMOUe6uEZJFeOiYdSi6xHRknMQo+6lA1UBk05E6tR6wiAKjiVnbxQ1oaDycDLLx+IZc24m+aqDb1oHi/zBpXpgp17lb0R1zXmUzdJS+diTHa+8Vl3LpodPlRzj24ygqrC3ymYwVS07yKiCSwNfKwqq0HbCVrXlhG/VDv6ecxEVjOgZDPAAAAAASUVORK5CYII=",alt:"Razorpay Logo"}),(0,Z.jsx)("span",{children:"Razorpay"})]})})})}),(0,Z.jsx)("input",{type:"submit",value:"Pay \u20b9".concat(I.toLocaleString()),disabled:!!H,className:"".concat(H?"bg-primary-grey cursor-not-allowed":"bg-primary-orange cursor-pointer"," w-1/2 sm:w-1/4 my-2 py-3 font-medium text-white shadow hover:shadow-lg rounded-sm uppercase outline-none")})]})})})}),(0,Z.jsx)(l.Z,{cartItems:k})]})})]})}},5554:function(e,t,n){var r=n(6417);t.Z=function(e){var t=e.cartItems;return(0,r.jsx)("div",{className:"flex sticky top-16 sm:h-screen flex-col sm:w-4/12 sm:px-1",children:(0,r.jsxs)("div",{className:"flex flex-col bg-white rounded-sm shadow",children:[(0,r.jsx)("h1",{className:"px-6 py-3 border-b font-medium text-gray-500",children:"PRICE DETAILS"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-6 pb-3",children:[(0,r.jsxs)("p",{className:"flex justify-between",children:["Price (",t.length," item) ",(0,r.jsxs)("span",{children:["\u20b9",t.reduce((function(e,t){return e+t.cuttedPrice*t.quantity}),0).toLocaleString()]})]}),(0,r.jsxs)("p",{className:"flex justify-between",children:["Discount ",(0,r.jsxs)("span",{className:"text-primary-green",children:["- \u20b9",t.reduce((function(e,t){return e+(t.cuttedPrice*t.quantity-t.price*t.quantity)}),0).toLocaleString()]})]}),(0,r.jsxs)("p",{className:"flex justify-between",children:["Delivery Charges ",(0,r.jsx)("span",{className:"text-primary-green",children:"FREE"})]}),(0,r.jsx)("div",{className:"border border-dashed"}),(0,r.jsxs)("p",{className:"flex justify-between text-lg font-medium",children:["Total Amount ",(0,r.jsxs)("span",{children:["\u20b9",t.reduce((function(e,t){return e+t.price*t.quantity}),0).toLocaleString()]})]}),(0,r.jsx)("div",{className:"border border-dashed"}),(0,r.jsxs)("p",{className:"font-medium text-primary-green",children:["You will save \u20b9",t.reduce((function(e,t){return e+(t.cuttedPrice*t.quantity-t.price*t.quantity)}),0).toLocaleString()," on this order"]})]})]})})}},3405:function(e,t,n){var r=n(1413),a=n(6352),s=n(8728),c=n(6417),i=function(e){var t=e.isDesc,n=e.label,r=e.desc,a=e.index;return(0,c.jsxs)("div",{className:"flex bg-white shadow px-4 py-3 pb-4 rounded-sm",children:[(0,c.jsx)("span",{className:"mt-2 ml-2 mr-4 h-5 w-5 flex items-center justify-center text-xs font-medium bg-gray-100 rounded-sm text-primary-blue",children:a+1}),(0,c.jsxs)("div",{className:"flex flex-col mt-1 gap-0.5",children:[(0,c.jsxs)("h2",{className:"font-medium text-gray-500 flex items-center gap-2",children:[n,t&&(0,c.jsx)("span",{className:"text-primary-blue mb-1",children:(0,c.jsx)(s.Z,{sx:{fontSize:"20px"}})})]}),t&&r]})]})};t.Z=function(e){var t=e.activeStep,n=e.children,s=(0,a.v9)((function(e){return e.user})).user,o=(0,a.v9)((function(e){return e.cart})),u=o.shippingInfo,l=o.cartItems,p="".concat(u.address,", ").concat(u.city,", ").concat(u.state," - ").concat(u.pincode),d=[{label:"LOGIN",desc:(0,c.jsxs)("p",{className:"font-medium text-sm",children:[s.name," ",(0,c.jsx)("span",{className:"text-sm font-normal",children:s.email})]})},{label:"DELIVERY ADDRESS",desc:(0,c.jsxs)("p",{className:"font-medium text-sm",children:[s.name," ",(0,c.jsx)("span",{className:"text-sm font-normal",children:p})]})},{label:"ORDER SUMMARY",desc:(0,c.jsxs)("p",{className:"font-medium text-sm",children:[l.length," Item"]})},{label:"PAYMENT OPTIONS",desc:(0,c.jsx)("p",{className:"font-medium text-sm",children:"Paytm"})}];return(0,c.jsx)("div",{className:"flex flex-col gap-4",children:d.map((function(e,a){return(0,c.jsx)(c.Fragment,{children:t===a?(0,c.jsxs)("div",{className:"flex flex-col shadow rounded-sm",children:[(0,c.jsxs)("div",{className:"flex items-center rounded-t-sm bg-primary-blue px-6 py-2 gap-4",children:[(0,c.jsx)("span",{className:"h-5 w-5 flex items-center justify-center text-xs font-medium bg-white rounded-sm text-primary-blue",children:a+1}),(0,c.jsx)("h2",{className:"font-medium text-white",children:e.label})]}),n]}):(0,c.jsx)(c.Fragment,{children:t>a?(0,c.jsx)(i,(0,r.Z)((0,r.Z)({isDesc:!0},e),{},{index:a})):(0,c.jsx)(i,(0,r.Z)((0,r.Z)({isDesc:!1},e),{},{index:a}))})})}))})}},4675:function(e,t,n){var r=n(182),a=n(6417);t.Z=function(e){var t=e.title;return(0,a.jsx)(r.q,{children:(0,a.jsx)("title",{children:t})})}}}]);