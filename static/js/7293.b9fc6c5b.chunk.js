"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7293],{7293:function(e,t,a){a.r(t);var n=a(3433),r=a(4942),s=a(1413),i=a(9439),l=a(6783),o=a(7313),u=a(1997),c=a(7903),d=a(6352),m=a(7230),f=a(8467),p=a(6741),h=a(1175),x=a(4572),g=a(1674),v=a(1805),j=a(4675),b=a(6417);t.default=function(){var e=(0,d.I0)(),t=(0,m.Ds)().enqueueSnackbar,a=(0,f.s0)(),y=(0,f.UO)(),Z=(0,d.v9)((function(e){return e.productDetails})),w=Z.loading,N=Z.product,S=Z.error,C=(0,d.v9)((function(e){return e.product})),P=C.loading,k=C.isUpdated,D=C.error,z=(0,o.useState)([]),q=(0,i.Z)(z,2),A=q[0],F=q[1],U=(0,o.useState)(""),I=(0,i.Z)(U,2),E=I[0],L=I[1],R=(0,o.useState)([]),B=(0,i.Z)(R,2),M=B[0],W=B[1],H=(0,o.useState)({title:"",description:""}),J=(0,i.Z)(H,2),K=J[0],O=J[1],_=(0,o.useState)(""),T=(0,i.Z)(_,2),G=T[0],Q=T[1],V=(0,o.useState)(""),X=(0,i.Z)(V,2),Y=X[0],$=X[1],ee=(0,o.useState)(0),te=(0,i.Z)(ee,2),ae=te[0],ne=te[1],re=(0,o.useState)(0),se=(0,i.Z)(re,2),ie=se[0],le=se[1],oe=(0,o.useState)(""),ue=(0,i.Z)(oe,2),ce=ue[0],de=ue[1],me=(0,o.useState)(0),fe=(0,i.Z)(me,2),pe=fe[0],he=fe[1],xe=(0,o.useState)(0),ge=(0,i.Z)(xe,2),ve=ge[0],je=ge[1],be=(0,o.useState)(""),ye=(0,i.Z)(be,2),Ze=ye[0],we=ye[1],Ne=(0,o.useState)([]),Se=(0,i.Z)(Ne,2),Ce=Se[0],Pe=Se[1],ke=(0,o.useState)([]),De=(0,i.Z)(ke,2),ze=De[0],qe=De[1],Ae=(0,o.useState)([]),Fe=(0,i.Z)(Ae,2),Ue=Fe[0],Ie=Fe[1],Ee=(0,o.useState)(""),Le=(0,i.Z)(Ee,2),Re=Le[0],Be=Le[1],Me=(0,o.useState)(""),We=(0,i.Z)(Me,2),He=We[0],Je=We[1],Ke=function(e){O((0,s.Z)((0,s.Z)({},K),{},(0,r.Z)({},e.target.name,e.target.value)))},Oe=y.id;return(0,o.useEffect)((function(){N&&N._id!==Oe?e((0,h.KL)(Oe)):(Q(N.name),$(N.description),ne(N.price),le(N.cuttedPrice),de(N.category),he(N.stock),je(N.warranty),we(N.brand.name),F(N.highlights),W(N.specifications),qe(N.images),Je(N.brand.logo.url)),S&&(t(S,{variant:"error"}),e((0,h.b9)())),D&&(t(D,{variant:"error"}),e((0,h.b9)())),k&&(t("Product Updated Successfully",{variant:"success"}),e({type:p.Ab}),e({type:p._x}),a("/admin/products"))}),[e,S,D,k,Oe,N,a,t]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Z,{title:"Admin: Update Product | Flipkart"}),w&&(0,b.jsx)(g.Z,{}),P&&(0,b.jsx)(g.Z,{}),(0,b.jsxs)("form",{onSubmit:function(a){if(a.preventDefault(),A.length<=0)t("Add Highlights",{variant:"warning"});else if(M.length<=1)t("Add Minimum 2 Specifications",{variant:"warning"});else{var n=new FormData;n.set("name",G),n.set("description",Y),n.set("price",ae),n.set("cuttedPrice",ie),n.set("category",ce),n.set("stock",pe),n.set("warranty",ve),n.set("brandname",Ze),n.set("logo",Re),Ce.forEach((function(e){n.append("images",e)})),A.forEach((function(e){n.append("highlights",e)})),M.forEach((function(e){n.append("specifications",JSON.stringify(e))})),e((0,h.nM)(y.id,n))}},encType:"multipart/form-data",className:"flex flex-col sm:flex-row bg-white rounded-lg shadow p-4",id:"mainform",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 m-2 sm:w-1/2",children:[(0,b.jsx)(l.Z,{label:"Name",variant:"outlined",size:"small",required:!0,value:G,onChange:function(e){return Q(e.target.value)}}),(0,b.jsx)(l.Z,{label:"Description",multiline:!0,rows:3,required:!0,variant:"outlined",size:"small",value:Y,onChange:function(e){return $(e.target.value)}}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(l.Z,{label:"Price",type:"number",variant:"outlined",size:"small",InputProps:{inputProps:{min:0}},required:!0,value:ae,onChange:function(e){return ne(e.target.value)}}),(0,b.jsx)(l.Z,{label:"Cutted Price",type:"number",variant:"outlined",size:"small",InputProps:{inputProps:{min:0}},required:!0,value:ie,onChange:function(e){return le(e.target.value)}})]}),(0,b.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,b.jsx)(l.Z,{label:"Category",select:!0,fullWidth:!0,variant:"outlined",size:"small",required:!0,value:ce,onChange:function(e){return de(e.target.value)},children:v.b.map((function(e,t){return(0,b.jsx)(c.Z,{value:e,children:e},t)}))}),(0,b.jsx)(l.Z,{label:"Stock",type:"number",variant:"outlined",size:"small",InputProps:{inputProps:{min:0}},required:!0,value:pe,onChange:function(e){return he(e.target.value)}}),(0,b.jsx)(l.Z,{label:"Warranty",type:"number",variant:"outlined",size:"small",InputProps:{inputProps:{min:0}},required:!0,value:ve,onChange:function(e){return je(e.target.value)}})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center border rounded",children:[(0,b.jsx)("input",{value:E,onChange:function(e){return L(e.target.value)},type:"text",placeholder:"Highlight",className:"px-2 flex-1 outline-none border-none"}),(0,b.jsx)("span",{onClick:function(){E.trim()&&(F([].concat((0,n.Z)(A),[E])),L(""))},className:"py-2 px-6 bg-primary-blue text-white rounded-r hover:shadow-lg cursor-pointer",children:"Add"})]}),(0,b.jsx)("div",{className:"flex flex-col gap-1.5",children:A.map((function(e,t){return(0,b.jsxs)("div",{className:"flex justify-between rounded items-center py-1 px-2 bg-green-50",children:[(0,b.jsx)("p",{className:"text-green-800 text-sm font-medium",children:e}),(0,b.jsx)("span",{onClick:function(){return e=t,void F(A.filter((function(t,a){return a!==e})));var e},className:"text-red-600 hover:bg-red-100 p-1 rounded-full cursor-pointer",children:(0,b.jsx)(u.Z,{})})]})}))})]}),(0,b.jsx)("h2",{className:"font-medium",children:"Brand Details"}),(0,b.jsxs)("div",{className:"flex justify-between gap-4 items-start",children:[(0,b.jsx)(l.Z,{label:"Brand",type:"text",variant:"outlined",size:"small",required:!0,value:Ze,onChange:function(e){return we(e.target.value)}}),(0,b.jsx)("div",{className:"w-24 h-10 flex items-center justify-center border rounded-lg",children:He?(0,b.jsx)("img",{draggable:"false",src:He,alt:"Brand Logo",className:"w-full h-full object-contain"}):(0,b.jsx)(x.Z,{})}),(0,b.jsxs)("label",{className:"rounded font-medium bg-gray-400 text-center cursor-pointer text-white py-2 px-2.5 shadow hover:shadow-lg",children:[(0,b.jsx)("input",{type:"file",name:"logo",accept:"image/*",onChange:function(e){var t=new FileReader;Be(""),Je(""),t.onload=function(){2===t.readyState&&(Je(t.result),Be(t.result))},t.readAsDataURL(e.target.files[0])},className:"hidden"}),"Choose Logo"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 m-2 sm:w-1/2",children:[(0,b.jsx)("h2",{className:"font-medium",children:"Specifications"}),(0,b.jsxs)("div",{className:"flex justify-evenly gap-2 items-center",children:[(0,b.jsx)(l.Z,{value:K.title,onChange:Ke,name:"title",label:"Name",placeholder:"Model No",variant:"outlined",size:"small"}),(0,b.jsx)(l.Z,{value:K.description,onChange:Ke,name:"description",label:"Description",placeholder:"WJDK42DF5",variant:"outlined",size:"small"}),(0,b.jsx)("span",{onClick:function(){K.title.trim()&&K.title.trim()&&(W([].concat((0,n.Z)(M),[K])),O({title:"",description:""}))},className:"py-2 px-6 bg-primary-blue text-white rounded hover:shadow-lg cursor-pointer",children:"Add"})]}),(0,b.jsx)("div",{className:"flex flex-col gap-1.5",children:M.map((function(e,t){return(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm rounded bg-blue-50 py-1 px-2",children:[(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:e.title}),(0,b.jsx)("p",{children:e.description}),(0,b.jsx)("span",{onClick:function(){return e=t,void W(M.filter((function(t,a){return a!==e})));var e},className:"text-red-600 hover:bg-red-200 bg-red-100 p-1 rounded-full cursor-pointer",children:(0,b.jsx)(u.Z,{})})]})}))}),(0,b.jsx)("h2",{className:"font-medium",children:"Product Images"}),(0,b.jsxs)("div",{className:"flex gap-2 overflow-x-auto h-32 border rounded",children:[ze&&ze.map((function(e,t){return(0,b.jsx)("img",{draggable:"false",src:e.url,alt:"Product",className:"w-full h-full object-contain"},t)})),Ue.map((function(e,t){return(0,b.jsx)("img",{draggable:"false",src:e,alt:"Product",className:"w-full h-full object-contain"},t)}))]}),(0,b.jsxs)("label",{className:"rounded font-medium bg-gray-400 text-center cursor-pointer text-white p-2 shadow hover:shadow-lg my-2",children:[(0,b.jsx)("input",{type:"file",name:"images",accept:"image/*",multiple:!0,onChange:function(e){var t=Array.from(e.target.files);Pe([]),Ie([]),qe([]),t.forEach((function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&(Ie((function(e){return[].concat((0,n.Z)(e),[t.result])})),Pe((function(e){return[].concat((0,n.Z)(e),[t.result])})))},t.readAsDataURL(e)}))},className:"hidden"}),"Choose Files"]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("input",{form:"mainform",type:"submit",className:"bg-primary-orange uppercase w-1/3 p-3 text-white font-medium rounded shadow hover:shadow-lg cursor-pointer",value:"Update"})})]})]})]})}}}]);