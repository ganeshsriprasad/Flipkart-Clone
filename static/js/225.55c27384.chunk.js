"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[225],{1507:function(e,t,n){n.d(t,{Cs:function(){return f},PO:function(){return d},TG:function(){return l},b9:function(){return v},s$:function(){return u},wH:function(){return x},yv:function(){return p},zk:function(){return m}});var r=n(4165),a=n(5861),s=n(1881),i=n.n(s),c=n(531),o=n(8725),d=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:c.Zm}),{headers:{"Content-Type":"application/json"}},t.next=5,i().post("".concat(o.Z,"/order/new"),e,{withCredentials:!0});case 5:a=t.sent,s=a.data,n({type:c.Cd,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:c.Hn,payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},l=function(){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:c.A4}),e.next=4,i().get("".concat(o.Z,"/orders/me"),{withCredentials:!0});case 4:n=e.sent,a=n.data,t({type:c.SJ,payload:a.orders}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:c.ut,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},u=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:c.YO}),t.next=4,i().get("".concat(o.Z,"/order/").concat(e),{withCredentials:!0});case 4:a=t.sent,s=a.data,n({type:c.um,payload:s.order}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:c.Ab,payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:c.dR}),t.next=4,i().get("".concat(o.Z,"/payment/status/").concat(e),{withCredentials:!0});case 4:a=t.sent,s=a.data,console.log(s),n({type:c.jl,payload:s.txn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:c.CY,payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},m=function(){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:c.Ux}),e.next=4,i().get("".concat(o.Z,"/admin/orders"),{withCredentials:!0});case 4:n=e.sent,a=n.data,t({type:c.g6,payload:a.orders}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:c.xH,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e,t){return function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var s,d;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:c.Mi}),{headers:{"Content-Type":"application/json"}},n.next=5,i().put("".concat(o.Z,"/admin/order/").concat(e),t,{withCredentials:!0});case 5:s=n.sent,d=s.data,a({type:c.Bx,payload:d.success}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:c.vs,payload:n.t0.response.data.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},x=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:c.B6}),t.next=4,i().delete("".concat(o.Z,"/admin/order/").concat(e),{withCredentials:!0});case 4:a=t.sent,s=a.data,n({type:c.Sn,payload:s.success}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:c.gq,payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},v=function(){return function(e){e({type:c.pp})}}},3138:function(e,t,n){var r=n(5281),a=n(6417);t.Z=function(){return(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(r.Z,{})})}},225:function(e,t,n){n.r(t);var r=n(9439),a=n(1550),s=n(3306),i=n(6529),c=n(7903),o=n(7230),d=n(7313),l=n(6352),u=n(8467),p=n(1507),m=n(531),f=n(9257),x=n(2978),v=n(3138),h=n(2135),g=n(9883),y=n(4675),Z=n(6417);t.default=function(){var e=(0,l.I0)(),t=(0,o.Ds)().enqueueSnackbar,n=(0,u.UO)(),b=(0,d.useState)(""),j=(0,r.Z)(b,2),w=j[0],N=j[1],S=(0,l.v9)((function(e){return e.orderDetails})),C=S.order,k=S.error,I=S.loading,O=(0,l.v9)((function(e){return e.order})),D=O.isUpdated,A=O.error;(0,d.useEffect)((function(){k&&(t(k,{variant:"error"}),e((0,p.b9)())),A&&(t(A,{variant:"error"}),e((0,p.b9)())),D&&(t("Order Updates Successfully",{variant:"success"}),e({type:m.Q})),e((0,p.s$)(n.id))}),[e,k,n.id,D,A,t]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(y.Z,{title:"Admin: Update Order | Flipkart"}),I?(0,Z.jsx)(v.Z,{}):(0,Z.jsx)(Z.Fragment,{children:C&&C.user&&C.shippingInfo&&(0,Z.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Z.jsxs)(h.rU,{to:"/admin/orders",className:"ml-1 flex items-center gap-0 font-medium text-primary-blue uppercase",children:[(0,Z.jsx)(g.Z,{sx:{fontSize:"18px"}}),"Go Back"]}),(0,Z.jsxs)("div",{className:"flex flex-col sm:flex-row bg-white shadow-lg rounded-lg min-w-full",children:[(0,Z.jsx)("div",{className:"sm:w-1/2 border-r",children:(0,Z.jsxs)("div",{className:"flex flex-col gap-3 my-8 mx-10",children:[(0,Z.jsx)("h3",{className:"font-medium text-lg",children:"Delivery Address"}),(0,Z.jsx)("h4",{className:"font-medium",children:C.user.name}),(0,Z.jsx)("p",{className:"text-sm",children:"".concat(C.shippingInfo.address,", ").concat(C.shippingInfo.city,", ").concat(C.shippingInfo.state," - ").concat(C.shippingInfo.pincode)}),(0,Z.jsxs)("div",{className:"flex gap-2 text-sm",children:[(0,Z.jsx)("p",{className:"font-medium",children:"Email"}),(0,Z.jsx)("p",{children:C.user.email})]}),(0,Z.jsxs)("div",{className:"flex gap-2 text-sm",children:[(0,Z.jsx)("p",{className:"font-medium",children:"Phone Number"}),(0,Z.jsx)("p",{children:C.shippingInfo.phoneNo})]})]})}),(0,Z.jsxs)("form",{onSubmit:function(t){t.preventDefault();var r=new FormData;r.set("status",w),e((0,p.Cs)(n.id,r))},className:"flex flex-col gap-3 p-8",children:[(0,Z.jsx)("h3",{className:"font-medium text-lg",children:"Update Status"}),(0,Z.jsxs)("div",{className:"flex gap-2",children:[(0,Z.jsx)("p",{className:"text-sm font-medium",children:"Current Status:"}),(0,Z.jsxs)("p",{className:"text-sm",children:["Shipped"===C.orderStatus&&"Shipped on ".concat((0,f.p6)(C.shippedAt)),"Processing"===C.orderStatus&&"Ordered on ".concat((0,f.p6)(C.createdAt)),"Delivered"===C.orderStatus&&"Delivered on ".concat((0,f.p6)(C.deliveredAt))]})]}),(0,Z.jsxs)(a.Z,{fullWidth:!0,sx:{marginTop:1},children:[(0,Z.jsx)(s.Z,{id:"order-status-select-label",children:"Status"}),(0,Z.jsxs)(i.Z,{labelId:"order-status-select-label",id:"order-status-select",value:w,label:"Status",onChange:function(e){return N(e.target.value)},children:["Shipped"===C.orderStatus&&(0,Z.jsx)(c.Z,{value:"Delivered",children:"Delivered"}),"Processing"===C.orderStatus&&(0,Z.jsx)(c.Z,{value:"Shipped",children:"Shipped"}),"Delivered"===C.orderStatus&&(0,Z.jsx)(c.Z,{value:"Delivered",children:"Delivered"})]})]}),(0,Z.jsx)("button",{type:"submit",className:"bg-primary-orange p-2.5 text-white font-medium rounded shadow hover:shadow-lg",children:"Update"})]})]}),C.orderItems&&C.orderItems.map((function(e){var t=e._id,n=e.image,r=e.name,a=e.price,s=e.quantity;return(0,Z.jsxs)("div",{className:"flex flex-col sm:flex-row min-w-full shadow-lg rounded-lg bg-white px-2 py-5",children:[(0,Z.jsxs)("div",{className:"flex flex-col sm:flex-row sm:w-1/2 gap-1",children:[(0,Z.jsx)("div",{className:"w-full sm:w-32 h-24",children:(0,Z.jsx)("img",{draggable:"false",className:"h-full w-full object-contain",src:n,alt:r})}),(0,Z.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden",children:[(0,Z.jsx)("p",{className:"text-sm",children:r.length>45?"".concat(r.substring(0,45),"..."):r}),(0,Z.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["Quantity: ",s]}),(0,Z.jsxs)("p",{className:"text-xs text-gray-600",children:["Price: \u20b9",a.toLocaleString()]}),(0,Z.jsxs)("span",{className:"font-medium",children:["Total: \u20b9",(s*a).toLocaleString()]})]})]}),(0,Z.jsxs)("div",{className:"flex flex-col w-full sm:w-1/2",children:[(0,Z.jsx)("h3",{className:"font-medium sm:text-center",children:"Order Status"}),(0,Z.jsx)(x.Z,{orderOn:C.createdAt,shippedAt:C.shippedAt,deliveredAt:C.deliveredAt,activeStep:"Delivered"===C.orderStatus?2:"Shipped"===C.orderStatus?1:0})]})]},t)}))]})})]})}},4675:function(e,t,n){var r=n(182),a=n(6417);t.Z=function(e){var t=e.title;return(0,a.jsx)(r.q,{children:(0,a.jsx)("title",{children:t})})}},2978:function(e,t,n){var r=n(1917),a=n(8490),s=n(315),i=n(3813),c=n(9257),o=n(6417);t.Z=function(e){var t=e.activeStep,n=e.orderOn,d=e.shippedAt,l=e.deliveredAt,u=[{status:"Ordered",dt:(0,c.p6)(n)},{status:"Shipped",dt:(0,c.p6)(d)},{status:"Delivered",dt:(0,c.p6)(l)}],p=(0,o.jsx)("span",{className:"text-primary-green animate-pulse",children:(0,o.jsx)(i.Z,{sx:{fontSize:"16px"}})}),m=(0,o.jsx)("span",{className:"text-gray-400",children:(0,o.jsx)(i.Z,{sx:{fontSize:"16px"}})});return(0,o.jsx)(r.Z,{activeStep:t,alternativeLabel:!0,children:u.map((function(e,n){return(0,o.jsx)(a.Z,{active:t===n,completed:t>=n,children:(0,o.jsx)(s.Z,{icon:t>=n?p:m,children:t>=n?(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-primary-green font-medium",children:e.status}),"Invalid Date"!==e.dt&&(0,o.jsx)("span",{className:"text-primary-green font-medium",children:e.dt})]}):(0,o.jsx)("span",{className:"text-gray-400 font-medium",children:e.status})})},n)}))})}},9257:function(e,t,n){n.d(t,{Y2:function(){return i},cn:function(){return a},fL:function(){return r},p6:function(){return s}});var r=function(e,t){return((t-e)/t*100).toFixed()},a=function(){var e=new Date;return e.setDate((new Date).getDate()+7),e.toUTCString().substring(0,11)},s=function(e){return new Date(e).toUTCString().substring(0,16)},i=function(e,t){return e.sort((function(){return.5-Math.random()})).slice(0,t)}},9883:function(e,t,n){var r=n(4836);t.Z=void 0;var a=r(n(5045)),s=n(6417),i=(0,a.default)((0,s.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.Z=i},7903:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(4942),a=n(3366),s=n(7462),i=n(7313),c=n(3061),o=n(1921),d=n(7551),l=n(7743),u=n(9394),p=n(1195),m=n(7999),f=n(4993),x=n(6983),v=n(7430);var h=(0,v.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var g=(0,v.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);var y=(0,v.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Z=n(2298);function b(e){return(0,Z.Z)("MuiMenuItem",e)}var j=(0,v.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),w=n(6417),N=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],S=(0,l.ZP)(m.Z,{shouldForwardProp:function(e){return(0,l.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,a=e.ownerState;return(0,s.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,r.Z)(t,"&.".concat(j.selected),(0,r.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(j.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,r.Z)(t,"&.".concat(j.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,r.Z)(t,"&.".concat(j.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,r.Z)(t,"&.".concat(j.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,r.Z)(t,"& + .".concat(h.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,r.Z)(t,"& + .".concat(h.inset),{marginLeft:52}),(0,r.Z)(t,"& .".concat(y.root),{marginTop:0,marginBottom:0}),(0,r.Z)(t,"& .".concat(y.inset),{paddingLeft:36}),(0,r.Z)(t,"& .".concat(g.root),{minWidth:36}),t),!a.dense&&(0,r.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),a.dense&&(0,s.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,r.Z)({},"& .".concat(g.root," svg"),{fontSize:"1.25rem"})))})),C=i.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiMenuItem"}),r=n.autoFocus,d=void 0!==r&&r,l=n.component,m=void 0===l?"li":l,v=n.dense,h=void 0!==v&&v,g=n.divider,y=void 0!==g&&g,Z=n.disableGutters,j=void 0!==Z&&Z,C=n.focusVisibleClassName,k=n.role,I=void 0===k?"menuitem":k,O=n.tabIndex,D=n.className,A=(0,a.Z)(n,N),M=i.useContext(p.Z),F=i.useMemo((function(){return{dense:h||M.dense||!1,disableGutters:j}}),[M.dense,h,j]),T=i.useRef(null);(0,f.Z)((function(){d&&T.current&&T.current.focus()}),[d]);var L,U=(0,s.Z)({},n,{dense:F.dense,divider:y,disableGutters:j}),B=function(e){var t=e.disabled,n=e.dense,r=e.divider,a=e.disableGutters,i=e.selected,c=e.classes,d={root:["root",n&&"dense",t&&"disabled",!a&&"gutters",r&&"divider",i&&"selected"]},l=(0,o.Z)(d,b,c);return(0,s.Z)({},c,l)}(n),G=(0,x.Z)(T,t);return n.disabled||(L=void 0!==O?O:-1),(0,w.jsx)(p.Z.Provider,{value:F,children:(0,w.jsx)(S,(0,s.Z)({ref:G,role:I,tabIndex:L,component:m,focusVisibleClassName:(0,c.Z)(B.focusVisible,C),className:(0,c.Z)(B.root,D)},A,{ownerState:U,classes:B}))})}))}}]);